---
import ArrowCard from "@/components/ArrowCard.astro";
import BackToTop from "@/components/BackToTop";
import Container from "@/components/Container.astro";
import Link from "@/components/Link.astro";
import Social from "@/components/Social.astro";
import config from "@/config";
import Base from "@/layouts/Base.astro";
import { filterDrafts, sortByDate } from "@/lib/content";
import socialList from "@/social";
import { getCollection } from "astro:content";

const blogs = filterDrafts(await getCollection("blog"));

const recentBlogs = sortByDate(blogs).slice(
  0,
  config.settings.num_posts_on_homepage
);
---

<Base>
  <Container>
    <div class="space-y-16">
      <section>
        <article>
          <h4 class="animate font-semibold text-black dark:text-white mb-1">
            å—¨ï¼Œæˆ‘æ˜¯ Michael <span class="text-xl">ğŸ‘‹</span>
          </h4>
          <p class="animate mb-2">
            ç¾è·å‰ç«¯å·¥ç¨‹å¸«ï¼Œå·¥ä½œä¸Šä½¿ç”¨ Reactã€Next.js é–‹ç™¼ã€‚
            å–œæ­¡æ‹ç…§ï¼Œéƒ¨è½æ ¼ä½¿ç”¨çš„åœ–ç‰‡éƒ½æ˜¯è‡ªå·±æ‹çš„ã€‚
          </p>
        </article>
        <Social
          source={socialList}
          className={{
            list: "flex flex-wrap gap-2 animate mt-2",
            item: "flex",
            icon: "size-6",
          }}
        />
      </section>

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h5 class="font-semibold text-black dark:text-white">
            æœ€è¿‘ç™¼è¡¨çš„æ–‡ç« 
          </h5>
          {
            blogs.length > recentBlogs.length && (
              <Link href="/blog">æ›´å¤šæ–‡ç« </Link>
            )
          }
        </div>
        <ul class="flex flex-col gap-4">
          {
            recentBlogs.map((post) => (
              <li>
                <ArrowCard entry={post} />
              </li>
            ))
          }
        </ul>
      </section>
    </div>

    <div class="animate flex mt-24">
      <BackToTop client:only="react" />
    </div>
  </Container>
</Base>
